<!DOCTYPE html> <html lang="en" dir="auto"> <head><meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=no"> <meta name="description" content="라즈베리파이에 젠킨스 올리기 1 파이썬으로 WordFinder 프로젝트를 진행하면서 매 버전마다 윈도우 실행파일을 만들기 위해서 다음과 같은 과정을 거쳤다. 맥북에서 코드를 작성하고 이를 깃허브에 푸쉬한다. 윈도우 데스크탑에서 깃허브에 접속해 전체 코드를 내려받는..."> <meta name="revised" content="e3bc2bcd3a1b25091bbf73247b047cb79f59554e"> <meta name="author" content="altair823"> <meta name="generator" content="jekyll-rtd-theme v2.0.10"><meta name="theme-color" content="#2980b9"> <title>라즈베리파이에 젠킨스 올리기 1 · altair823</title> <meta name="twitter:title" content="라즈베리파이에 젠킨스 올리기 1 · altair823"> <meta name="twitter:description" content="라즈베리파이에 젠킨스 올리기 1 파이썬으로 WordFinder 프로젝트를 진행하면서 매 버전마다 윈도우 실행파일을 만들기 위해서 다음과 같은 과정을 거쳤다. 맥북에서 코드를 작성하고 이를 깃허브에 푸쉬한다. 윈도우 데스크탑에서 깃허브에 접속해 전체 코드를 내려받는..."> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@altair823"> <meta name="twitter:url" content="http://localhost:4000/post/raspberrypi/2021-07-20-jenkins1.html"> <meta name="twitter:creator" content="@jekyll-rtd-theme v2.0.10"> <meta property="og:title" content="라즈베리파이에 젠킨스 올리기 1 · altair823"> <meta property="og:description" content="라즈베리파이에 젠킨스 올리기 1 파이썬으로 WordFinder 프로젝트를 진행하면서 매 버전마다 윈도우 실행파일을 만들기 위해서 다음과 같은 과정을 거쳤다. 맥북에서 코드를 작성하고 이를 깃허브에 푸쉬한다. 윈도우 데스크탑에서 깃허브에 접속해 전체 코드를 내려받는..."> <meta property="og:locale" content="en"> <meta property="og:url" content="http://localhost:4000/post/raspberrypi/2021-07-20-jenkins1.html"> <meta property="og:type" content="article"> <meta property="article:author" content="altair823"> <meta property="article:published_time" content="2021-07-20T00:00:00+09:00"> <meta property="article:modified_time" content="2021-07-29T07:30:04+09:00"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "Article", "mainEntityOfPage": { "@type": "WebPage", "@id": "http://localhost:4000/post/raspberrypi/2021-07-20-jenkins1.html" }, "headline": "라즈베리파이에 젠킨스 올리기 1 · altair823", "image": [], "author": { "@type": "Person", "name": "altair823" }, "datePublished": "2021-07-20T00:00:00+09:00", "dateModified": "2021-07-29T07:30:04+09:00", "publisher": { "@type": "User", "name": "altair823", "logo": { "@type": "ImageObject", "url": "https://avatars.githubusercontent.com/u/46125008?v=4" } }, "description": "라즈베리파이에 젠킨스 올리기 1 파이썬으로 WordFinder 프로젝트를 진행하면서 매 버전마다 윈도우 실행파일을 만들기 위해서 다음과 같은 과정을 거쳤다. 맥북에서 코드를 작성하고 이를 깃허브에 푸쉬한다. 윈도우 데스크탑에서 깃허브에 접속해 전체 코드를 내려받는..." } </script> <link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="next" href="http://localhost:4000/post/raspberrypi/2021-02-27-first.html"><link rel="canonical" href="http://localhost:4000/post/raspberrypi/2021-07-20-jenkins1.html"><link rel="icon" type="image/svg+xml" href="/assets/images/favicon.svg"><link rel="icon" type="image/png" href="/assets/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/assets/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/assets/images/favicon-96x96.png" sizes="96x96"><link rel="mask-icon" href="/assets/images/favicon.svg" color="#2980b9"><link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-300x300.jpg"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/css/theme.min.css"><script> window.ui = { title: "altair823", baseurl: "", i18n: { search_results: "Search Results", search_results_found: "Search finished, found # page(s) matching the search query.", search_results_not_found: "Your search did not match any documents, please make sure that all characters are spelled correctly!" } }; </script> </head> <body class="container"><div class="sidebar-wrap overflow-hidden"> <div class="sidebar height-full overflow-y-scroll overflow-x-hidden"> <div class="header d-flex flex-column p-3 text-center"> <div class="title pb-1"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/" title="personal tech blog"> <i class="fa fa-home"></i> altair823 </a> </div> <span class="version"></span> <form class="search pt-2" action="/search.html" method="get" autocomplete="off"> <input class="form-control input-block input-sm" type="text" name="q" placeholder="Search docs..."> </form> </div> <div class="toctree py-2" data-spy="affix" role="navigation" aria-label="main navigation"> <ul> </ul> <a class="caption d-block text-uppercase no-wrap px-2 py-0" href="/post/"> 컴퓨터 </a><ul> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/post/data_structure/"> 자료구조 </a><ul> <li class="toc level-2 " data-sort="" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/data_structure/2021-04-27-qsort.html">qsort.c 분석</a> </li> <li class="toc level-2 " data-sort="" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/data_structure/2021-05-10-Linked_list_searching_with_index.html">연결리스트에서 탐색 빠르게 하기</a> </li> <li class="toc level-2 " data-sort="" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/data_structure/2021-06-26-Tree.html">AVL과 RB비교</a> </li> <li class="toc level-2 " data-sort="" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/data_structure/2021-07-13-maze_structure.html">미로의 자료구조</a> </li></ul> </li> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/post/algorithm/"> 알고리즘 </a><ul> <li class="toc level-2 " data-sort="" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/algorithm/2021-07-13-Eller's_algorithm.html">미로 생성 알고리즘</a> </li> <li class="toc level-2 " data-sort="" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/algorithm/2021-07-27-SPA_compare.html">최단경로 탐색 알고리즘 비교</a> </li></ul> </li> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/post/raspberrypi/"> 라즈베리파이 </a><ul> <li class="toc level-2 current" data-sort="" data-level="2"> <a class="d-flex flex-items-baseline current" href="/post/raspberrypi/2021-07-20-jenkins1.html">라즈베리파이에 젠킨스 올리기 1</a> </li> <li class="toc level-2 " data-sort="1" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/raspberrypi/2021-02-27-first.html">1. 라즈베리파이에 관한 이야기</a> </li> <li class="toc level-2 " data-sort="2" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/raspberrypi/2021-02-27-madeNAS.html">2. 라즈베리파이에 OMV로 NAS만들기</a> </li> <li class="toc level-2 " data-sort="3" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/raspberrypi/2021-03-02-transmission_error.html">3. 트랜스미션 &#8220;Permission denied&#8230;&#8221; 오류 해결하기</a> </li> <li class="toc level-2 " data-sort="4" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/raspberrypi/2021-03-02-OMV(1).html">4. OMV를 사용하며 겪었던 시행착오들 (1)</a> </li> <li class="toc level-2 " data-sort="5" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/raspberrypi/2021-03-02-OMV(2).html">5. OMV를 사용하며 겪었던 시행착오들 (2)</a> </li></ul> </li> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/post/extra/"> 기타 </a><ul> <li class="toc level-2 " data-sort="" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/extra/2021-06-02-Linux_mint_review_1.html">리눅스 민트 설치 후기 1</a> </li> <li class="toc level-2 " data-sort="" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/extra/2021-06-02-Linux_mint_review_2.html">리눅스 민트 설치 후기 2</a> </li></ul> </li> <li class="toc level-1"> <a class="d-flex flex-items-baseline" href="/post/Python/"> 파이썬 </a><ul> <li class="toc level-2 " data-sort="" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/Python/2021-06-30-Project_Word_Finder_1.html">Word Finder 개발기 1</a> </li> <li class="toc level-2 " data-sort="" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/Python/2021-07-05-Project_Word_Finder_2.html">Word Finder 개발기 2</a> </li> <li class="toc level-2 " data-sort="" data-level="2"> <a class="d-flex flex-items-baseline " href="/post/Python/2021-07-05-Project_Word_Finder_3.html">Word Finder 개발기 3</a> </li></ul> </li></ul> </div> </div> </div> <div class="content-wrap"> <div class="header d-flex flex-justify-between p-2 hide-lg hide-xl" aria-label="top navigation"> <button id="toggle" aria-label="Toggle menu" class="btn-octicon p-2 m-0 text-white" type="button"> <i class="fa fa-bars"></i> </button> <div class="title flex-1 d-flex flex-justify-center"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/">altair823</a> </div> </div> <div class="content p-3 p-sm-5"> <div class="navigation-top d-flex flex-justify-between"> <ul class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation"> <li class="breadcrumb-item"> <a class="no-underline" href="/" title="/"> <i class="fa fa-home"></i> </a> </li><li class="breadcrumb-item" ><a href="/post/">post</a></li><li class="breadcrumb-item" ><a href="/post/raspberrypi/">raspberrypi</a></li><li class="breadcrumb-item" aria-current="page">2021-07-20-jenkins1.md</li></ul> <a class="edit" href="https://github.com/altair823/altair823.github.io/edit/gh-pages/post/raspberrypi/2021-07-20-jenkins1.md" title="Edit on GitHub" rel="noreferrer" target="_blank"> <i class="fa fa-edit"></i> </a> </div> <hr> <div role="main" itemscope="itemscope" itemtype="https://schema.org/Article"> <div class="markdown-body" itemprop="articleBody"> <h1 id="라즈베리파이에-젠킨스-올리기-1">라즈베리파이에 젠킨스 올리기 1</h1> <p>파이썬으로 WordFinder 프로젝트를 진행하면서 매 버전마다 윈도우 실행파일을 만들기 위해서 다음과 같은 과정을 거쳤다.</p> <ol> <li>맥북에서 코드를 작성하고 이를 깃허브에 푸쉬한다.</li> <li>윈도우 데스크탑에서 깃허브에 접속해 전체 코드를 내려받는다.</li> <li>main.py를 실행해 정상 작동하는지 체크한다.</li> <li>정상적으로 작동한다면 pyinstaller를 실행하여 .exe 파일을 생성한다.</li> <li>.exe파일을 실행해 정상 작동하는지 체크한다.</li> <li>정상적으로 작동한다면 .exe 파일을 압축한다.</li> <li>압축한 파일을 NAS에 FTP로 올린다.</li> <li>FTP서버에서 버전 파일을 수정한다.</li> </ol> <p>사용자 입장에서는 업데이트 버튼만 누르면 알아서 업데이트가 진행되겠지만 개발자 입장에서는 최종 빌드 결과물을 사용자에게 전달하기까지 이렇게 복잡한 과정을 거쳐야 했다. 간단한 코드 리팩토링이나 한 두 줄짜리 자잘한 버그 픽스만 했을 뿐인데 그것을 사용자에게 전달하려면 오히려 코딩 자체보다 더 많은 시간이 걸리기도 했다.</p> <p>그때는 아직 CI/CD와 같은 개념을 몰랐기 때문에, 전체 릴리즈 과정을 자동화하는 파이썬 스크립트를 작성하여 해결했다. 서버의 아이디와 비밀번호, 보안에 중요한 정보들이 하드코딩 되어있기 때문에 자세한 코드를 올릴 수는 없다. 하지만 기본적인 로직은 깃헙에서 zip파일을 다운받고, pyinstaller를 실행해 exe를 만들고, 이를 압축하여 서버에 올리는 것이다. 그 과정에서 버전 또한 자동으로 올라갈 수 있도록 하였다.</p> <p>그러다가 CI/CD의 개념 또한 알게 되었고 젠킨스나 Azure DevOps Server와 같은 솔루션들을 알게되었다. 그 중에서도 오픈소스이고 컴퓨터에 쉽게 설치 가능한 젠킨스를 도커 없이 내 라즈베리파이에 직접 설치하고자 했다.</p> <h2 id="다룰-내용-요약">다룰 내용 요약</h2> <p>젠킨스에서 자동화할 개인 프로젝트는 <a href="https://github.com/altair823/SPA_compare">미로찾기에서 최단경로 알고리즘 성능 비교 프로젝트</a>이다. C++로 작성되었으며 젠킨스로 CMake와 make를 사용하여 자동으로 빌드하는 것까지 구현할 것이다. 또한 깃허브 메인 브랜치에 푸쉬할 때마다 바뀐 코드들을 새로 빌드하며 그 결과를 Slack를 통해 보고할 수 있도록 할 것이다.</p> <h2 id="젠킨스-설치">젠킨스 설치</h2> <p>라즈베리파이 4B+에 라즈베리파이 OS Lite 32비트 버전을 설치하였다. 기본적인 초기 설정과 업데이트는 글에서 생략하겠다. 초기 설정 이후 어떤 프로그램도 설치되지 않았다는 것을 전제한다.</p> <p>젠킨스는 자바를 기반으로 동작하니 라즈베리파이에 자바를 설치해야 한다.</p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>openjdk-11-jdk
</code></pre>  </div></div> <p>현재 라즈베리파이에서 지원하는 최신 버전인 openjdk-11을 설치하였다.</p> <p><a href="https://www.jenkins.io/doc/book/installing/linux/">젠킨스 공식 문서</a>에서는 데비안 기반 리눅스에 LTS버전을 설치하기 위한 명령을 다음과 같이 안내하고 있다.</p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>wget <span class="nt">-q</span> <span class="nt">-O</span> - https://pkg.jenkins.io/debian-stable/jenkins.io.key | <span class="nb">sudo </span>apt-key add -
<span class="nb">sudo </span>sh <span class="nt">-c</span> <span class="s1">'echo deb https://pkg.jenkins.io/debian-stable binary/ &gt; \
    /etc/apt/sources.list.d/jenkins.list'</span>
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>jenkins
</code></pre>  </div></div> <p><img src="https://user-images.githubusercontent.com/46125008/126339087-0be1860d-c465-4751-8144-de5475d9a824.png" alt="젠킨스를 설치 중인 화면" /></p> <p>설치가 마무리되면 라즈베리파이의 로컬 IP의 8080 포트로 접속한다.</p> <p><img src="https://user-images.githubusercontent.com/46125008/126339091-e458fb46-0864-43f1-9ffb-b8045399aab4.png" alt="" /></p> <p>로딩이 완료되면 다음과 같은 화면이 나온다.</p> <p><img src="https://user-images.githubusercontent.com/46125008/126339094-e614ac54-9bb9-4e30-9348-20ba6f856fb4.png" alt="" /></p> <p>초기 비밀번호는 화면에 나오는 저 파일에 존재하지만 권한이 막혀있으니 사용자를 관리자로 변경하여 복사하자.</p> <div class="language-sh highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> <span class="nt">-i</span> su
<span class="nb">cd</span> /var/lib/jenkins/secrets
<span class="nb">cat </span>initialAdminPassword
</code></pre>  </div></div> <p>화면에 뿌려진 비밀번호를 입력하면 플러그인을 설치할지 물어보는데, 공식 문서에서 말해주다시피 모르면 그냥 권장하는 거를 선택하자.</p> <p><img src="https://user-images.githubusercontent.com/46125008/126339100-aa0b15a7-bb84-4c96-8451-6d1f15fc93d7.png" alt="" /></p> <p>이후 어드민 설정까지 끝내면 다음과 같은 초기화면이 나온다.</p> <p><img src="https://user-images.githubusercontent.com/46125008/126339129-d9c2ba29-fa80-46f8-86c5-e498a586d8a7.png" alt="" /></p> <p>정말 간단하게 라즈베리파이에 젠킨스를 설치했다! 와이파이로 연결했다면 사실상 손바닥 만한 물건에 전원선 하나만 연결했을 뿐인데 젠킨스 서버 역할을 수행할 수 있는 것이다. 다음 글에서는 간단한 빌드와 깃허브 연동, 슬랙 연동을 해보겠다.</p> <script async src="https://utteranc.es/client.js" repo="altair823/blog_comments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async=""> </script> </div> </div> <div class="navigation-bottom d-flex flex-justify-between py-3" role="navigation" aria-label="footer navigation"> <div class="prev"></div> <div class="next"><a href="/post/raspberrypi/2021-02-27-first.html" class="btn" title="라즈베리파이에 관한 이야기" accesskey="n" rel="next"> Next <i class="fa fa-arrow-circle-right"></i> </a></div> </div><hr> <div class="copyright text-center text-gray" role="contentinfo"> <i class="fa fa-copyright"></i> <span class="time">2021,</span> <a class="text-gray" href="https://github.com/altair823" rel="noreferrer" target="_blank">altair823</a> Revision <a class="text-gray" href="https://github.com/altair823/altair823.github.io/commit/e3bc2bcd3a1b25091bbf73247b047cb79f59554e" title="e3bc2bcd3a1b25091bbf73247b047cb79f59554e" rel="noreferrer" target="_blank">e3bc2bc</a> <br> <div class="generator"> Built with <a href="https://pages.github.com" rel="noreferrer" target="_blank" title="github-pages v209">GitHub Pages</a> using a <a href="https://github.com/rundocs/jekyll-rtd-theme" rel="noreferrer" target="_blank" title="jekyll-rtd-theme v2.0.10">theme</a> provided by <a href="https://rundocs.io" rel="noreferrer" target="_blank">RunDocs</a>. </div> </div> </div> </div> <div class="addons-wrap d-flex flex-column overflow-y-auto"> <div class="status d-flex flex-justify-between p-2"> <div class="title p-1"> <i class="fa fa-book"></i> altair823 </div> <div class="branch p-1"> <span class="name"> gh-pages </span> <i class="fa fa-caret-down"></i> </div> </div> <div class="addons d-flex flex-column height-full p-2 d-none"> <dl> <dt>GitHub</dt> <dd> <a href="https://github.com/altair823/altair823.github.io" title="Stars: 0"> <i class="fa fa-github"></i> Homepage </a> </dd> <dd> <a href="https://github.com/altair823/altair823.github.io/issues" title="Open issues: 4"> <i class="fa fa-question-circle-o"></i> Issues </a> </dd> <dd> <a href="https://github.com/altair823/altair823.github.io/zipball/gh-pages" title="Size: 3541 Kb"> <i class="fa fa-download"></i> Download </a> </dd> </dl> <hr> <div class="license f6 pb-2"> This <a href="/" title="altair823">Software</a> is under the terms of <a href="https://github.com/altair823/altair823.github.io">MIT License</a>. </div> </div> </div> <script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/js/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/js/theme.min.js"></script> </body> </html>